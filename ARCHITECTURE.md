# ARCHITECTURE.md - à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¸£à¸°à¸šà¸šà¹à¸¥à¸° Data Flow

## ðŸ“‹ à¸ à¸²à¸žà¸£à¸§à¸¡ (Overview)

à¹€à¸­à¸à¸ªà¸²à¸£à¸™à¸µà¹‰à¸­à¸˜à¸´à¸šà¸²à¸¢à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¸£à¸°à¸šà¸š à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸¡à¸”à¸¹à¸¥ à¸à¸²à¸£à¹„à¸«à¸¥à¸‚à¸­à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ (data flow) à¸à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£ dependency à¹à¸¥à¸°à¸à¸£à¸°à¸šà¸§à¸™à¸à¸²à¸£ build/run à¸‚à¸­à¸‡à¹‚à¸›à¸£à¹€à¸ˆà¸à¸•à¹Œ Tran Overlay

---

## ðŸ—ï¸ à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¸£à¸°à¸šà¸šà¸£à¸°à¸”à¸±à¸šà¸ªà¸¹à¸‡ (High-Level System Architecture)

### 1. à¹à¸œà¸™à¸ à¸²à¸žà¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¹‚à¸”à¸¢à¸£à¸§à¸¡ (Overall Architecture Diagram)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         User Interface                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  Settings    â”‚  â”‚  Overlay     â”‚  â”‚  Tray Icon   â”‚          â”‚
â”‚  â”‚  Panel       â”‚  â”‚  Window      â”‚  â”‚  Window      â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Frontend (React + TS)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  Components  â”‚  â”‚   Hooks      â”‚  â”‚  Services    â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Tauri IPC Layer (Bridge)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  Commands    â”‚  â”‚   Events     â”‚  â”‚   State      â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Backend (Rust)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   OCR        â”‚  â”‚ Translation  â”‚  â”‚   Capture    â”‚          â”‚
â”‚  â”‚   Engine     â”‚  â”‚   Service    â”‚  â”‚   Module     â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  Hotkeys     â”‚  â”‚  Settings    â”‚  â”‚   Overlay    â”‚          â”‚
â”‚  â”‚  Manager     â”‚  â”‚  Manager     â”‚  â”‚   Manager    â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   External Services & APIs                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  Tesseract   â”‚  â”‚ Google       â”‚  â”‚  System      â”‚          â”‚
â”‚  â”‚  (OCR)       â”‚  â”‚  Translate   â”‚  â”‚  APIs        â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. à¹€à¸¥à¹€à¸¢à¸­à¸£à¹Œà¸‚à¸­à¸‡à¸£à¸°à¸šà¸š (System Layers)

| Layer | Technology | Responsibility |
|-------|-----------|---------------|
| **Presentation Layer** | React + TypeScript + Tailwind CSS | UI rendering, user interactions |
| **Application Layer** | Tauri | IPC communication, window management |
| **Business Logic Layer** | Rust | OCR, translation, capture logic |
| **Data Layer** | SQLite/JSON | Settings, history, cache storage |
| **External Services Layer** | REST APIs | Translation APIs, OCR engines |
| **System Layer** | OS APIs | Screen capture, hotkeys, file system |

---

## ðŸ§© à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¸„à¸­à¸¡à¹‚à¸žà¹€à¸™à¸™à¸•à¹Œ (Component Architecture)

### 1. à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸¡à¸”à¸¹à¸¥ (Module Structure)

#### Frontend (src/)
```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/                    # Base UI components (Button, Input, etc.)
â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚   â”‚   â”œâ”€â”€ input.tsx
â”‚   â”‚   â”œâ”€â”€ modal.tsx
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ layout/                # Layout components
â”‚   â”‚   â”œâ”€â”€ header.tsx
â”‚   â”‚   â”œâ”€â”€ sidebar.tsx
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ TranslationOverlay.tsx # Main overlay component
â”‚   â”œâ”€â”€ SettingsPanel.tsx      # Settings interface
â”‚   â”œâ”€â”€ HistoryList.tsx        # History display
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ settings/
â”‚   â”‚   â”œâ”€â”€ index.tsx         # Settings main page
â”‚   â”‚   â”œâ”€â”€ general.tsx       # General settings
â”‚   â”‚   â”œâ”€â”€ translation.tsx   # Translation settings
â”‚   â”‚   â”œâ”€â”€ ocr.tsx           # OCR settings
â”‚   â”‚   â”œâ”€â”€ overlay.tsx       # Overlay settings
â”‚   â”‚   â””â”€â”€ hotkeys.tsx       # Hotkey settings
â”‚   â”œâ”€â”€ history/
â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â””â”€â”€ home.tsx
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useTranslation.ts      # Translation hook
â”‚   â”œâ”€â”€ useHotkeys.ts          # Hotkey hook
â”‚   â”œâ”€â”€ useSettings.ts        # Settings hook
â”‚   â”œâ”€â”€ useOverlay.ts          # Overlay hook
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ tauri.ts              # Tauri IPC wrapper
â”‚   â”œâ”€â”€ translation.ts        # Translation API service
â”‚   â”œâ”€â”€ ocr.ts                # OCR service
â”‚   â””â”€â”€ settings.ts           # Settings service
â”œâ”€â”€ store/
â”‚   â”œâ”€â”€ index.ts              # Store configuration
â”‚   â”œâ”€â”€ translationSlice.ts   # Translation state
â”‚   â”œâ”€â”€ settingsSlice.ts      # Settings state
â”‚   â””â”€â”€ historySlice.ts       # History state
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ translation.ts
â”‚   â”œâ”€â”€ settings.ts
â”‚   â””â”€â”€ ocr.ts
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ format.ts             # Formatting utilities
â”‚   â”œâ”€â”€ validation.ts         # Validation utilities
â”‚   â””â”€â”€ hotkeys.ts            # Hotkey parsing
â”œâ”€â”€ App.tsx
â”œâ”€â”€ main.tsx
â””â”€â”€ vite-env.d.ts
```

#### Backend (src-tauri/src/)
```
src-tauri/src/
â”œâ”€â”€ main.rs                   # Application entry point
â”œâ”€â”€ lib.rs                    # Library exports
â”œâ”€â”€ commands/                 # Tauri commands (IPC handlers)
â”‚   â”œâ”€â”€ mod.rs
â”‚   â”œâ”€â”€ capture.rs           # Screen capture commands
â”‚   â”œâ”€â”€ ocr.rs               # OCR commands
â”‚   â”œâ”€â”€ translation.rs       # Translation commands
â”‚   â”œâ”€â”€ overlay.rs           # Overlay commands
â”‚   â”œâ”€â”€ hotkeys.rs           # Hotkey commands
â”‚   â””â”€â”€ settings.rs          # Settings commands
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ mod.rs
â”‚   â”œâ”€â”€ capture/
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ screen.rs        # Screen capture implementation
â”‚   â”‚   â””â”€â”€ selector.rs      # Selection window logic
â”‚   â”œâ”€â”€ ocr/
â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”œâ”€â”€ engine.rs        # OCR engine abstraction
â”‚   â”‚   â”œâ”€â”€ tesseract.rs     # Tesseract implementation
â”‚   â”‚   â””â”€â”€ preprocessor.rs  # Image preprocessing
â”‚   â””â”€â”€ translate/
â”‚       â”œâ”€â”€ mod.rs
â”‚       â”œâ”€â”€ service.rs       # Translation service
â”‚       â”œâ”€â”€ providers/
â”‚       â”‚   â”œâ”€â”€ mod.rs
â”‚       â”‚   â”œâ”€â”€ google.rs    # Google Translate
â”‚       â”‚   â”œâ”€â”€ deepl.rs     # DeepL API
â”‚       â”‚   â””â”€â”€ local.rs     # Local translation model
â”‚       â””â”€â”€ cache.rs         # Translation cache
â”œâ”€â”€ overlay/
â”‚   â”œâ”€â”€ mod.rs
â”‚   â”œâ”€â”€ window.rs            # Overlay window management
â”‚   â”œâ”€â”€ renderer.rs          # Overlay rendering
â”‚   â””â”€â”€ positioning.rs       # Positioning logic
â”œâ”€â”€ hotkeys/
â”‚   â”œâ”€â”€ mod.rs
â”‚   â”œâ”€â”€ manager.rs           # Global hotkey manager
â”‚   â””â”€â”€ conflict.rs         # Hotkey conflict detection
â”œâ”€â”€ settings/
â”‚   â”œâ”€â”€ mod.rs
â”‚   â”œâ”€â”€ config.rs            # Settings configuration
â”‚   â”œâ”€â”€ storage.rs           # Settings persistence
â”‚   â””â”€â”€ validator.rs         # Settings validation
â”œâ”€â”€ history/
â”‚   â”œâ”€â”€ mod.rs
â”‚   â”œâ”€â”€ manager.rs           # History management
â”‚   â””â”€â”€ storage.rs           # History persistence
â””â”€â”€ utils/
    â”œâ”€â”€ mod.rs
    â”œâ”€â”€ image.rs             # Image utilities
    â”œâ”€â”€ error.rs             # Error handling
    â””â”€â”€ logger.rs            # Logging utilities
```

### 2. Dependency Graph

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Frontend                              â”‚
â”‚                                                             â”‚
â”‚  App.tsx                                                   â”‚
â”‚    â”œâ”€â”€ Components â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚    â”‚    â”œâ”€â”€ TranslationOverlay â”‚                            â”‚
â”‚    â”‚    â”œâ”€â”€ SettingsPanel      â”‚                            â”‚
â”‚    â”‚    â””â”€â”€ HistoryList        â”‚                            â”‚
â”‚    â”œâ”€â”€ Pages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                            â”‚
â”‚    â”‚    â”œâ”€â”€ settings/         â”‚ â”‚                            â”‚
â”‚    â”‚    â””â”€â”€ history/          â”‚ â”‚                            â”‚
â”‚    â”œâ”€â”€ Hooks â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚                            â”‚
â”‚    â”‚    â”œâ”€â”€ useTranslation   â”‚â”‚ â”‚                            â”‚
â”‚    â”‚    â”œâ”€â”€ useHotkeys       â”‚â”‚ â”‚                            â”‚
â”‚    â”‚    â””â”€â”€ useSettings     â”‚â”‚ â”‚                            â”‚
â”‚    â”œâ”€â”€ Services â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚ â”‚                            â”‚
â”‚    â”‚    â””â”€â”€ tauri.ts â”€â”€â”€â”€â”€â”€â”€â”¼â”¼â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚    â”œâ”€â”€ Store â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚â”‚ â”‚        â”‚                     â”‚
â”‚    â”‚    â””â”€â”€ *Slice.ts â”€â”€â”€â”€â”¼â”¼â”¼â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”                â”‚
â”‚    â””â”€â”€ Types â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚â”‚â”‚â”‚ â”‚        â”‚    â”‚                â”‚
â”‚                         â””â”´â”´â”´â”´â”´â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â–¼                â”‚
â”‚                              Tauri IPC                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Backend                              â”‚
â”‚                                                             â”‚
â”‚  main.rs                                                    â”‚
â”‚    â”œâ”€â”€ Commands â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚    â”‚    â”œâ”€â”€ capture.rs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚           â”‚
â”‚    â”‚    â”œâ”€â”€ ocr.rs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚   â”‚           â”‚
â”‚    â”‚    â”œâ”€â”€ translation.rs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚   â”‚           â”‚
â”‚    â”‚    â”œâ”€â”€ overlay.rs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚â”‚   â”‚           â”‚
â”‚    â”‚    â”œâ”€â”€ hotkeys.rs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚â”‚â”‚   â”‚           â”‚
â”‚    â”‚    â””â”€â”€ settings.rs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”¼â”¼â”¼â”¼â”€â”€â”€â”˜           â”‚
â”‚    â”œâ”€â”€ Core â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚â”‚â”‚â”‚                 â”‚
â”‚    â”‚    â”œâ”€â”€ capture/ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚â”‚â”‚â”‚â”‚                 â”‚
â”‚    â”‚    â”œâ”€â”€ ocr/ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚â”‚â”‚â”‚â”‚â”‚                 â”‚
â”‚    â”‚    â””â”€â”€ translate/ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚                 â”‚
â”‚    â”œâ”€â”€ Overlay â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚                 â”‚
â”‚    â”œâ”€â”€ Hotkeys â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚                 â”‚
â”‚    â”œâ”€â”€ Settings â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚                 â”‚
â”‚    â””â”€â”€ History â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚                 â”‚
â”‚                             â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚â”‚                 â”‚
â”‚  External Dependencies â”€â”€â”€â”€â”€â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”€â”€â”€â”             â”‚
â”‚  â”œâ”€â”€ Tesseract (OCR) â”€â”€â”€â”€â”€â”€â”€â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”€â”€â”€â”           â”‚
â”‚  â”œâ”€â”€ Translation APIs â”€â”€â”€â”€â”€â”€â”€â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”€â”€â”€â”€â”         â”‚
â”‚  â””â”€â”€ System APIs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”¼â”€â”€â”€â”€â”       â”‚
â”‚                             â””â”´â”´â”´â”´â”´â”´â”´â”´â”´â”´â”´â”´â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”„ Data Flow (à¸à¸²à¸£à¹„à¸«à¸¥à¸‚à¸­à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥)

### 1. à¸à¸²à¸£à¹„à¸«à¸¥à¸‚à¸­à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸«à¸¥à¸±à¸ (Main Data Flow)

#### Flow 1: Screen Capture â†’ Translation â†’ Overlay Display

```
[User Action]                        [System]
    â”‚                                   â”‚
    â”œâ”€â–º Press Global Hotkey            â”‚
    â”‚                                   â”‚
    â”‚                                   â–¼
    â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                          â”‚ Hotkey Manager  â”‚
    â”‚                          â”‚ Detects keypressâ”‚
    â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                                   â”‚
    â”‚                                   â–¼
    â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                          â”‚ Selection Windowâ”‚
    â”‚                          â”‚ Opens overlay   â”‚
    â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                                   â”‚
    â”œâ”€â–º Drag to select area â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚                                   â”‚
    â”œâ”€â–º Release mouse â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚                                   â”‚
    â”‚                                   â–¼
    â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                          â”‚ Capture Module  â”‚
    â”‚                          â”‚ Captures screen â”‚
    â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                                   â”‚
    â”‚                                   â–¼
    â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                          â”‚ OCR Engine      â”‚
    â”‚                          â”‚ Processes image â”‚
    â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                                   â”‚
    â”‚                                   â–¼
    â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                          â”‚ OCR Result      â”‚
    â”‚                          â”‚ (Text detected)  â”‚
    â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                                   â”‚
    â”‚                                   â–¼
    â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                          â”‚ Check Cache     â”‚
    â”‚                          â”‚ (Translation?)  â”‚
    â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                          â”‚               â”‚
    â”‚                    [Yes] â”‚               â”‚ [No]
    â”‚                          â–¼               â–¼
    â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              â”‚ Return Cache â”‚  â”‚ Translation  â”‚
    â”‚              â”‚ Result       â”‚  â”‚ API Call     â”‚
    â”‚              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                     â”‚                 â”‚
    â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                              â”‚
    â”‚                              â–¼
    â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                     â”‚ Translation     â”‚
    â”‚                     â”‚ Result          â”‚
    â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                              â”‚
    â”‚                              â–¼
    â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                     â”‚ Store in Cache  â”‚
    â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                              â”‚
    â”‚                              â–¼
    â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                     â”‚ Overlay Manager â”‚
    â”‚                     â”‚ Creates window  â”‚
    â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                              â”‚
    â”‚                              â–¼
    â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                     â”‚ Display Overlay â”‚
    â”‚                     â”‚ Shows text      â”‚
    â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                              â”‚
    â”œâ”€â–º User sees translation â”€â”€â”€â”€â–ºâ”‚
    â”‚                              â”‚
    â”œâ”€â–º Press ESC/Close â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
    â”‚                              â”‚
    â”‚                              â–¼
    â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                     â”‚ Close Overlay   â”‚
    â”‚                     â”‚ Cleanup         â”‚
    â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Flow 2: Settings Update

```
[User]                            [System]
   â”‚                                  â”‚
   â”œâ”€â–º Open Settings Panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚                                  â”‚
   â”‚                                  â–¼
   â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                         â”‚ Load Settings  â”‚
   â”‚                         â”‚ from Storage   â”‚
   â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚                                 â”‚
   â”‚                                 â–¼
   â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                         â”‚ Render Settingsâ”‚
   â”‚                         â”‚ UI             â”‚
   â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚                                 â”‚
   â”œâ”€â–º Modify settings â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚                                 â”‚
   â”œâ”€â–º Click Save â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚                                 â”‚
   â”‚                                 â–¼
   â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                         â”‚ Validate      â”‚
   â”‚                         â”‚ Settings       â”‚
   â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
   â”‚                          â”‚             â”‚
   â”‚                    [Invalid] â”‚         â”‚ [Valid]
   â”‚                          â–¼             â–¼
   â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚              â”‚ Show Error   â”‚ â”‚ Save to      â”‚
   â”‚              â”‚ Message      â”‚ â”‚ Storage      â”‚
   â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚                                     â”‚
   â”‚                                     â–¼
   â”‚                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                            â”‚ Apply Settings  â”‚
   â”‚                            â”‚ to Running App  â”‚
   â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚                                     â”‚
   â”‚                                     â–¼
   â”‚                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                            â”‚ Restart        â”‚
   â”‚                            â”‚ Services       â”‚
   â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚                                     â”‚
   â”‚                                     â–¼
   â”‚                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                            â”‚ Show Success   â”‚
   â”‚                            â”‚ Notification   â”‚
   â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. State Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Frontend State                             â”‚
â”‚                                                                  â”‚
â”‚  Redux Store                                                    â”‚
â”‚    â”œâ”€â”€ Translation State                                        â”‚
â”‚    â”‚    â”œâ”€â”€ Current Translation                                 â”‚
â”‚    â”‚    â”œâ”€â”€ Loading Status                                      â”‚
â”‚    â”‚    â””â”€â”€ Error State                                         â”‚
â”‚    â”œâ”€â”€ Settings State                                           â”‚
â”‚    â”‚    â”œâ”€â”€ General Settings                                    â”‚
â”‚    â”‚    â”œâ”€â”€ Translation Settings                                â”‚
â”‚    â”‚    â”œâ”€â”€ OCR Settings                                        â”‚
â”‚    â”‚    â”œâ”€â”€ Overlay Settings                                    â”‚
â”‚    â”‚    â””â”€â”€ Hotkey Settings                                     â”‚
â”‚    â””â”€â”€ History State                                            â”‚
â”‚         â”œâ”€â”€ Translation History                                 â”‚
â”‚         â””â”€â”€ Filter/Sort Options                                 â”‚
â”‚                                                                  â”‚
â”‚  Component State (React)                                        â”‚
â”‚    â”œâ”€â”€ Local Component State (ephemeral UI state)               â”‚
â”‚    â””â”€â”€ Derived State (computed from Redux)                     â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ Sync via Tauri Commands
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Backend State                              â”‚
â”‚                                                                  â”‚
â”‚  In-Memory State                                                â”‚
â”‚    â”œâ”€â”€ Current Settings (loaded from storage)                   â”‚
â”‚    â”œâ”€â”€ Active Overlays (list of overlay windows)                â”‚
â”‚    â”œâ”€â”€ Registered Hotkeys (global hotkey registry)             â”‚
â”‚    â”œâ”€â”€ Translation Cache (in-memory LRU cache)                 â”‚
â”‚    â””â”€â”€ Current Capture Session (active selection)              â”‚
â”‚                                                                  â”‚
â”‚  Persistent Storage (File System)                               â”‚
â”‚    â”œâ”€â”€ Settings File (JSON)                                     â”‚
â”‚    â”‚    â”œâ”€â”€ General Settings                                    â”‚
â”‚    â”‚    â”œâ”€â”€ Translation Settings                                â”‚
â”‚    â”‚    â”œâ”€â”€ OCR Settings                                        â”‚
â”‚    â”‚    â”œâ”€â”€ Overlay Settings                                    â”‚
â”‚    â”‚    â””â”€â”€ Hotkey Settings                                     â”‚
â”‚    â”œâ”€â”€ History Database (SQLite)                               â”‚
â”‚    â”‚    â”œâ”€â”€ Translation Records                                 â”‚
â”‚    â”‚    â”œâ”€â”€ Timestamps                                          â”‚
â”‚    â”‚    â”œâ”€â”€ Source/Target Languages                             â”‚
â”‚    â”‚    â””â”€â”€ Confidence Scores                                   â”‚
â”‚    â””â”€â”€ Cache Storage (SQLite/JSON)                              â”‚
â”‚         â”œâ”€â”€ Cached Translations                                 â”‚
â”‚         â”œâ”€â”€ Expiry Times                                        â”‚
â”‚         â””â”€â”€ Hash Keys                                          â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Event Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Event Flow Diagram                        â”‚
â”‚                                                                  â”‚
â”‚  System Events                                                  â”‚
â”‚    â”œâ”€â”€ Application Lifecycle                                   â”‚
â”‚    â”‚    â”œâ”€â”€ App Startup                                         â”‚
â”‚    â”‚    â”‚    â””â”€â–º Initialize Services â”€â”€â–º Load Settings          â”‚
â”‚    â”‚    â”œâ”€â”€ App Shutdown                                        â”‚
â”‚    â”‚    â”‚    â””â”€â–º Save State â”€â”€â–º Cleanup Resources             â”‚
â”‚    â”‚    â””â”€â–º Window Focus/Focus Lost                             â”‚
â”‚    â”‚         â””â”€â–º Pause/Resume Hotkey Detection                  â”‚
â”‚    â”‚                                                             â”‚
â”‚    â”œâ”€â”€ User Input Events                                        â”‚
â”‚    â”‚    â”œâ”€â”€ Global Hotkey Pressed                               â”‚
â”‚    â”‚    â”‚    â””â”€â–º Hotkey Manager â”€â”€â–º Dispatch Action            â”‚
â”‚    â”‚    â”œâ”€â”€ Mouse Selection Complete                             â”‚
â”‚    â”‚    â”‚    â””â”€â–º Capture Module â”€â”€â–º Start OCR                   â”‚
â”‚    â”‚    â””â”€â–º Overlay Interactions (Close, Drag)                  â”‚
â”‚    â”‚         â””â”€â–º Overlay Manager â”€â”€â–º Update State               â”‚
â”‚    â”‚                                                             â”‚
â”‚    â”œâ”€â”€ IPC Events                                                â”‚
â”‚    â”‚    â”œâ”€â”€ Frontend â†’ Backend (Commands)                       â”‚
â”‚    â”‚    â”‚    â”œâ”€â”€ capture_screen                                 â”‚
â”‚    â”‚    â”‚    â”œâ”€â”€ recognize_text                                 â”‚
â”‚    â”‚    â”‚    â”œâ”€â”€ translate_text                                 â”‚
â”‚    â”‚    â”‚    â”œâ”€â”€ show_overlay                                   â”‚
â”‚    â”‚    â”‚    â”œâ”€â”€ register_hotkey                               â”‚
â”‚    â”‚    â”‚    â””â”€â–º save/load_settings                            â”‚
â”‚    â”‚    â”‚                                                         â”‚
â”‚    â”‚    â””â”€â”€ Backend â†’ Frontend (Events)                         â”‚
â”‚    â”‚         â”œâ”€â”€ translation_complete                           â”‚
â”‚    â”‚         â”œâ”€â”€ ocr_complete                                   â”‚
â”‚    â”‚         â”œâ”€â”€ settings_updated                               â”‚
â”‚    â”‚         â””â”€â–º error_occurred                                â”‚
â”‚    â”‚                                                             â”‚
â”‚    â””â”€â”€ External API Events                                      â”‚
â”‚         â”œâ”€â”€ Translation API Response                            â”‚
â”‚         â”‚    â””â”€â–º Translation Service â”€â”€â–º Cache â”€â”€â–º IPC Event   â”‚
â”‚         â”œâ”€â”€ OCR Engine Result                                   â”‚
â”‚         â”‚    â””â”€â–º OCR Engine â”€â”€â–º Preprocess â”€â”€â–º IPC Event      â”‚
â”‚         â””â”€â–º Network/Error Events                                â”‚
â”‚              â””â”€â–º Error Handler â”€â”€â–º User Notification            â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”— Dependency Management (à¸à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£ Dependency)

### 1. Rust Dependencies (src-tauri/Cargo.toml)

```toml
[dependencies]
# Core
tauri = { version = "2.0", features = ["shell-open"] }
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
tokio = { version = "1.35", features = ["full"] }
anyhow = "1.0"
thiserror = "1.0"

# Screen Capture
scrap = "0.5"
image = "0.24"
screenshots = "0.7"

# OCR
tesseract-rs = "0.1"
leptonica-plumbing = "0.1"

# Translation
reqwest = { version = "0.11", features = ["json"] }
async-trait = "0.1"

# Hotkeys
global-hotkey = "0.5"
keyboard-types = "0.7"

# Storage
dirs = "5.0"
rusqlite = { version = "0.30", features = ["bundled"] }

# Utilities
chrono = { version = "0.4", features = ["serde"] }
uuid = { version = "1.6", features = ["v4", "serde"] }
sha2 = "0.10"
hex = "0.4"

# Logging
tracing = "0.1"
tracing-subscriber = "0.3"
tracing-appender = "0.2"

# Cache
lru = "0.12"

[dev-dependencies]
mockito = "1.2"
tempfile = "3.8"
```

### 2. Frontend Dependencies (package.json)

```json
{
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "@tauri-apps/api": "^2.0.0",
    "@tauri-apps/plugin-shell": "^2.0.0",
    "@reduxjs/toolkit": "^2.0.1",
    "react-redux": "^9.0.4",
    "redux-undo": "^1.1.0",
    "immer": "^10.0.3",
    "zustand": "^4.4.7",
    "react-hotkeys-hook": "^4.4.1",
    "lucide-react": "^0.300.0",
    "clsx": "^2.1.0",
    "tailwind-merge": "^2.2.0",
    "date-fns": "^3.0.6",
    "react-virtual": "^3.0.4",
    "react-hot-toast": "^2.4.1",
    "framer-motion": "^10.16.16",
    "zod": "^3.22.4",
    "@hookform/resolvers": "^3.3.4",
    "react-hook-form": "^7.49.2"
  },
  "devDependencies": {
    "@types/react": "^18.2.47",
    "@types/react-dom": "^18.2.18",
    "@vitejs/plugin-react": "^4.2.1",
    "typescript": "^5.3.3",
    "vite": "^5.0.11",
    "eslint": "^8.56.0",
    "@typescript-eslint/eslint-plugin": "^6.19.0",
    "@typescript-eslint/parser": "^6.19.0",
    "prettier": "^3.1.1",
    "tailwindcss": "^3.4.1",
    "postcss": "^8.4.33",
    "autoprefixer": "^10.4.16",
    "@tanstack/react-query": "^5.17.19"
  }
}
```

### 3. Dependency Versioning Strategy

| Category | Strategy | Frequency |
|----------|----------|-----------|
| **Core Dependencies** | Pin to exact version | Updated quarterly |
| **UI Libraries** | Allow patch updates | Updated monthly |
| **Build Tools** | Allow minor updates | Updated when needed |
| **External APIs** | Version in config | As API evolves |
| **Dev Dependencies** | Allow latest | Updated as needed |

---

## ðŸ­ Build & Run Process (à¸à¸£à¸°à¸šà¸§à¸™à¸à¸²à¸£ Build à¹à¸¥à¸° Run)

### 1. Development Build Process

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Development Build Flow                        â”‚
â”‚                                                                  â”‚
â”‚  Step 1: Setup                                                  â”‚
â”‚    â”œâ”€â”€ Install Rust (rustup)                                    â”‚
â”‚    â”œâ”€â”€ Install Node.js + npm                                    â”‚
â”‚    â”œâ”€â”€ Install Tesseract (OS-specific)                         â”‚
â”‚    â””â”€â–º Clone repository                                         â”‚
â”‚                                                                  â”‚
â”‚  Step 2: Install Dependencies                                   â”‚
â”‚    â”œâ”€â”€ npm install (Frontend)                                   â”‚
â”‚    â””â”€â”€ cargo build (Backend - automatic)                         â”‚
â”‚                                                                  â”‚
â”‚  Step 3: Development Server                                     â”‚
â”‚    â”œâ”€â”€ npm run tauri dev                                        â”‚
â”‚    â”‚    â”œâ”€â”€ 1. Start Vite Dev Server (Frontend)                  â”‚
â”‚    â”‚    â”‚    â”œâ”€â”€ Compile TypeScript                            â”‚
â”‚    â”‚    â”‚    â”œâ”€â”€ Hot Module Replacement (HMR)                  â”‚
â”‚    â”‚    â”‚    â””â”€â–º Serve at http://localhost:1420                 â”‚
â”‚    â”‚    â”‚                                                       â”‚
â”‚    â”‚    â”œâ”€â”€ 2. Compile Rust Backend                             â”‚
â”‚    â”‚    â”‚    â”œâ”€â”€ cargo build                                    â”‚
â”‚    â”‚    â”‚    â”œâ”€â”€ Incremental compilation                        â”‚
â”‚    â”‚    â”‚    â””â”€â–º Link with Tauri                                â”‚
â”‚    â”‚    â”‚                                                       â”‚
â”‚    â”‚    â”œâ”€â”€ 3. Launch Tauri Application                        â”‚
â”‚    â”‚    â”‚    â”œâ”€â”€ Load frontend from dev server                  â”‚
â”‚    â”‚    â”‚    â”œâ”€â”€ Initialize IPC bridge                         â”‚
â”‚    â”‚    â”‚    â””â”€â–º Open application window                        â”‚
â”‚    â”‚    â”‚                                                       â”‚
â”‚    â”‚    â””â”€â”€ 4. Watch for Changes                                â”‚
â”‚    â”‚         â”œâ”€â”€ Watch TypeScript files â”€â”€â–º Recompile Frontend  â”‚
â”‚    â”‚         â””â”€â”€ Watch Rust files â”€â”€â–º Recompile Backend         â”‚
â”‚    â”‚                                                               â”‚
â”‚    â””â”€â–º Result: Hot Reload Development Environment               â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Production Build Process

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Production Build Flow                          â”‚
â”‚                                                                  â”‚
â”‚  Step 1: Lint & Test                                            â”‚
â”‚    â”œâ”€â”€ npm run lint (ESLint + Prettier)                          â”‚
â”‚    â”œâ”€â”€ cargo clippy (Rust linter)                               â”‚
â”‚    â”œâ”€â”€ npm run test (Unit tests)                                â”‚
â”‚    â””â”€â”€ cargo test (Rust tests)                                  â”‚
â”‚                                                                  â”‚
â”‚  Step 2: Optimize                                               â”‚
â”‚    â”œâ”€â”€ Frontend Optimization                                    â”‚
â”‚    â”‚    â”œâ”€â”€ TypeScript compilation                             â”‚
â”‚    â”‚    â”œâ”€â”€ Tree shaking                                       â”‚
â”‚    â”‚    â”œâ”€â”€ Code splitting                                      â”‚
â”‚    â”‚    â”œâ”€â”€ Minification (terser)                              â”‚
â”‚    â”‚    â””â”€â–º Output: dist/                                       â”‚
â”‚    â”‚                                                           â”‚
â”‚    â””â”€â”€ Backend Optimization                                     â”‚
â”‚        â”œâ”€â”€ cargo build --release                                â”‚
â”‚        â”œâ”€â”€ LTO (Link Time Optimization)                         â”‚
â”‚        â”œâ”€â”€ Strip debug symbols                                 â”‚
â”‚        â””â”€â–º Optimized binary                                    â”‚
â”‚                                                                  â”‚
â”‚  Step 3: Build                                                  â”‚
â”‚    â”œâ”€â”€ npm run tauri build                                     â”‚
â”‚    â”‚    â”œâ”€â”€ 1. Build frontend (Vite)                            â”‚
â”‚    â”‚    â”‚    â””â”€â–º Generate production bundle                     â”‚
â”‚    â”‚    â”‚                                                       â”‚
â”‚    â”‚    â”œâ”€â”€ 2. Build backend (Cargo)                            â”‚
â”‚    â”‚    â”‚    â””â”€â–º Generate optimized binary                      â”‚
â”‚    â”‚    â”‚                                                       â”‚
â”‚    â”‚    â”œâ”€â”€ 3. Package Application                              â”‚
â”‚    â”‚    â”‚    â”œâ”€â”€ Embed frontend into binary                     â”‚
â”‚    â”‚    â”‚    â”œâ”€â”€ Generate installer                             â”‚
â”‚    â”‚    â”‚    â”œâ”€â”€ Sign binary (if configured)                    â”‚
â”‚    â”‚    â”‚    â””â”€â–º Output: src-tauri/target/release/bundle/       â”‚
â”‚    â”‚    â”‚                                                       â”‚
â”‚    â”‚    â””â”€â”€ 4. Generate Artifacts                               â”‚
â”‚    â”‚         â”œâ”€â”€ Windows: .exe, .msi installer                 â”‚
â”‚    â”‚         â”œâ”€â”€ macOS: .app, .dmg                             â”‚
â”‚    â”‚         â””â”€â”€ Linux: .AppImage, .deb                         â”‚
â”‚    â”‚                                                               â”‚
â”‚    â””â”€â–º Result: Production-ready installers                      â”‚
â”‚                                                                  â”‚
â”‚  Step 4: Distribution                                           â”‚
â”‚    â”œâ”€â”€ Generate checksums                                       â”‚
â”‚    â”œâ”€â”€ Upload to distribution channel                           â”‚
â”‚    â””â”€â–º Release to users                                         â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Build Configuration

#### Tauri Configuration (tauri.conf.json)
```json
{
  "build": {
    "beforeDevCommand": "npm run dev",
    "beforeBuildCommand": "npm run build",
    "devUrl": "http://localhost:1420",
    "frontendDist": "../dist"
  },
  "bundle": {
    "active": true,
    "targets": "all",
    "icon": [
      "icons/32x32.png",
      "icons/128x128.png",
      "icons/128x128@2x.png",
      "icons/icon.icns",
      "icons/icon.ico"
    ],
    "identifier": "com.tranoverlay.app",
    "publisher": "YourCompany"
  },
  "tauri": {
    "allowlist": {
      "all": false,
      "shell": {
        "all": false,
        "open": true
      },
      "globalShortcut": {
        "all": true
      },
      "window": {
        "all": true,
        "close": true,
        "hide": true,
        "show": true,
        "maximize": true,
        "minimize": true,
        "unmaximize": true,
        "unminimize": true,
        "startDragging": true
      }
    },
    "bundle": {
      "windows": {
        "certificateThumbprint": null,
        "digestAlgorithm": "sha256",
        "timestampUrl": ""
      }
    },
    "security": {
      "csp": null
    },
    "updater": {
      "active": false
    },
    "windows": [
      {
        "title": "Tran Overlay",
        "label": "main",
        "url": "index.html",
        "width": 800,
        "height": 600,
        "resizable": true,
        "fullscreen": false
      },
      {
        "title": "Overlay",
        "label": "overlay",
        "url": "overlay.html",
        "width": 400,
        "height": 200,
        "resizable": true,
        "decorations": false,
        "transparent": true,
        "alwaysOnTop": true,
        "skipTaskbar": true
      }
    ]
  }
}
```

---

## ðŸ”’ Security Architecture (à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¸„à¸§à¸²à¸¡à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢)

### 1. Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Security Architecture                         â”‚
â”‚                                                                  â”‚
â”‚  Layer 1: Input Validation                                      â”‚
â”‚    â”œâ”€â”€ Validate all user inputs (settings, hotkeys, etc.)       â”‚
â”‚    â”œâ”€â”€ Sanitize file paths                                       â”‚
â”‚    â””â”€â–º Prevent injection attacks                                â”‚
â”‚                                                                  â”‚
â”‚  Layer 2: Data Protection                                       â”‚
â”‚    â”œâ”€â”€ Encrypt API keys at rest                                 â”‚
â”‚    â”œâ”€â”€ Use HTTPS for all external API calls                     â”‚
â”‚    â”œâ”€â”€ Secure storage for sensitive data                        â”‚
â”‚    â””â”€â–º Prevent data leaks                                       â”‚
â”‚                                                                  â”‚
â”‚  Layer 3: Authentication & Authorization                         â”‚
â”‚    â”œâ”€â”€ API key validation                                       â”‚
â”‚    â”œâ”€â”€ Rate limiting for API calls                              â”‚
â”‚    â”œâ”€â”€ Permission checks for system operations                  â”‚
â”‚    â””â”€â–º Prevent unauthorized access                              â”‚
â”‚                                                                  â”‚
â”‚  Layer 4: Network Security                                      â”‚
â”‚    â”œâ”€â”€ Certificate pinning for API endpoints                    â”‚
â”‚    â”œâ”€â”€ Request/response validation                              â”‚
â”‚    â”œâ”€â”€ Timeout and retry policies                               â”‚
â”‚    â””â”€â–º Prevent network attacks                                  â”‚
â”‚                                                                  â”‚
â”‚  Layer 5: Application Security                                  â”‚
â”‚    â”œâ”€â”€ Secure IPC communication                                  â”‚
â”‚    â”œâ”€â”€ Window permission checks                                 â”‚
â”‚    â”œâ”€â”€ Hotkey conflict prevention                               â”‚
â”‚    â””â”€â–º Prevent system vulnerabilities                          â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. API Key Storage

```rust
// API Key Storage Strategy
struct SecureStorage {
    /// Use OS keychain/credential manager
    keychain: Keychain,
}

impl SecureStorage {
    async fn store_api_key(&self, provider: &str, key: &str) -> Result<()> {
        // Store in OS keychain with app-specific access
        self.keychain.set_password(
            "tran_overlay",
            &format!("api_key_{}", provider),
            key,
        )?;
        Ok(())
    }
    
    async fn retrieve_api_key(&self, provider: &str) -> Result<String> {
        let key = self.keychain.get_password(
            "tran_overlay",
            &format!("api_key_{}", provider),
        )?;
        Ok(key)
    }
}
```

---

## âš¡ Performance Architecture (à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¸›à¸£à¸°à¸ªà¸´à¸—à¸˜à¸´à¸ à¸²à¸ž)

### 1. Performance Optimization Strategies

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Performance Optimization                        â”‚
â”‚                                                                  â”‚
â”‚  1. Caching Strategy                                            â”‚
â”‚     â”œâ”€â”€ Translation Cache (LRU)                                 â”‚
â”‚     â”‚    â”œâ”€â”€ Key: Hash of (source_text + target_language)      â”‚
â”‚     â”‚    â”œâ”€â”€ Value: Translation Result                          â”‚
â”‚     â”‚    â”œâ”€â”€ TTL: 1 hour                                        â”‚
â”‚     â”‚    â””â”€â–º Cache Hit Rate: ~70%                               â”‚
â”‚     â”‚                                                          â”‚
â”‚     â”œâ”€â”€ OCR Image Cache                                         â”‚
â”‚     â”‚    â”œâ”€â”€ Key: Hash of image data                            â”‚
â”‚     â”‚    â”œâ”€â”€ Value: OCR Result                                  â”‚
â”‚     â”‚    â”œâ”€â”€ TTL: 30 minutes                                    â”‚
â”‚     â”‚    â””â”€â–º Reduce redundant OCR processing                    â”‚
â”‚     â”‚                                                          â”‚
â”‚     â””â”€â”€ Settings Cache (in-memory)                              â”‚
â”‚          â”œâ”€â”€ Fast access without disk I/O                       â”‚
â”‚          â””â”€â–º Synced to disk on change                           â”‚
â”‚                                                                  â”‚
â”‚  2. Async Processing                                            â”‚
â”‚     â”œâ”€â”€ Non-blocking OCR operations                             â”‚
â”‚     â”œâ”€â”€ Parallel API requests (if multiple providers)          â”‚
â”‚     â”œâ”€â”€ Background cache cleanup                                â”‚
â”‚     â””â”€â–º Keep UI responsive                                       â”‚
â”‚                                                                  â”‚
â”‚  3. Memory Management                                           â”‚
â”‚     â”œâ”€â”€ Automatic image cleanup after processing               â”‚
â”‚     â”œâ”€â”€ Limited cache sizes (prevent memory leaks)              â”‚
â”‚     â”œâ”€â”€ Lazy loading of history entries                         â”‚
â”‚     â””â”€â–º Optimize memory footprint                               â”‚
â”‚                                                                  â”‚
â”‚  4. Rendering Optimization                                       â”‚
â”‚     â”œâ”€â”€ Virtual scrolling for history list                      â”‚
â”‚     â”œâ”€â”€ Debounced UI updates                                     â”‚
â”‚     â”œâ”€â”€ Lazy loading of overlay content                         â”‚
â”‚     â””â”€â–º Smooth 60 FPS rendering                                 â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Performance Targets

| Operation | Target | Optimization |
|-----------|--------|-------------|
| App Startup | < 3s | Lazy load services, cache settings |
| Screen Capture | < 100ms | Use efficient capture API |
| OCR Processing | < 3s | Preprocessing, Tesseract tuning |
| Translation API | < 2s | Caching, parallel requests |
| Overlay Display | < 50ms | Pre-create window pool |
| Settings Save | < 100ms | In-memory cache + debounced write |

---

## ðŸ§ª Testing Architecture (à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¸à¸²à¸£à¸—à¸”à¸ªà¸­à¸š)

### 1. Test Pyramid

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Test Pyramid                               â”‚
â”‚                                                                  â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚              â”‚   E2E Tests (5%)     â”‚                            â”‚
â”‚              â”‚  â€¢ Full user flows   â”‚                            â”‚
â”‚              â”‚  â€¢ Integration tests â”‚                            â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                         â”‚                                        â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚          â”‚   Integration Tests (15%)   â”‚                        â”‚
â”‚          â”‚  â€¢ Tauri command tests      â”‚                        â”‚
â”‚          â”‚  â€¢ API integration tests    â”‚                        â”‚
â”‚          â”‚  â€¢ Database tests          â”‚                        â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                     â”‚                                           â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚    â”‚    Unit Tests (80%)              â”‚                         â”‚
â”‚    â”‚  â€¢ Business logic tests        â”‚                         â”‚
â”‚    â”‚  â€¢ Component tests             â”‚                         â”‚
â”‚    â”‚  â€¢ Utility function tests      â”‚                         â”‚
â”‚    â”‚  â€¢ Model tests                  â”‚                         â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Test Structure

```
tests/
â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ rust/
â”‚   â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”‚   â”œâ”€â”€ ocr/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ engine_test.rs
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ preprocessor_test.rs
â”‚   â”‚   â”‚   â””â”€â”€ translate/
â”‚   â”‚   â”‚       â”œâ”€â”€ service_test.rs
â”‚   â”‚   â”‚       â””â”€â”€ cache_test.rs
â”‚   â”‚   â”œâ”€â”€ settings/
â”‚   â”‚   â”‚   â”œâ”€â”€ config_test.rs
â”‚   â”‚   â”‚   â””â”€â”€ validator_test.rs
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â”œâ”€â”€ image_test.rs
â”‚   â”‚       â””â”€â”€ validation_test.rs
â”‚   â”‚
â”‚   â””â”€â”€ frontend/
â”‚       â”œâ”€â”€ components/
â”‚       â”‚   â”œâ”€â”€ TranslationOverlay.test.tsx
â”‚       â”‚   â”œâ”€â”€ SettingsPanel.test.tsx
â”‚       â”‚   â””â”€â”€ HistoryList.test.tsx
â”‚       â”œâ”€â”€ hooks/
â”‚       â”‚   â”œâ”€â”€ useTranslation.test.ts
â”‚       â”‚   â””â”€â”€ useSettings.test.ts
â”‚       â””â”€â”€ services/
â”‚           â””â”€â”€ tauri.test.ts
â”‚
â”œâ”€â”€ integration/
â”‚   â”œâ”€â”€ commands/
â”‚   â”‚   â”œâ”€â”€ capture_test.rs
â”‚   â”‚   â”œâ”€â”€ ocr_test.rs
â”‚   â”‚   â”œâ”€â”€ translation_test.rs
â”‚   â”‚   â””â”€â”€ settings_test.rs
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ google_translate_test.rs
â”‚       â””â”€â”€ deepl_test.rs
â”‚
â”œâ”€â”€ e2e/
â”‚   â”œâ”€â”€ translation_flow.spec.ts
â”‚   â”œâ”€â”€ settings_flow.spec.ts
â”‚   â””â”€â”€ hotkey_flow.spec.ts
â”‚
â””â”€â”€ fixtures/
    â”œâ”€â”€ images/
    â”‚   â”œâ”€â”€ sample1.png
    â”‚   â””â”€â”€ sample2.png
    â””â”€â”€ mock_responses/
        â”œâ”€â”€ translation_response.json
        â””â”€â”€ ocr_response.json
```

---

## ðŸ“Š Deployment Architecture (à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¸à¸²à¸£à¸™à¸³à¹„à¸›à¹ƒà¸Šà¹‰à¸‡à¸²à¸™)

### 1. Deployment Strategy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Deployment Strategy                           â”‚
â”‚                                                                  â”‚
â”‚  Distribution Channels                                          â”‚
â”‚    â”œâ”€â”€ GitHub Releases (primary)                                â”‚
â”‚    â”‚    â”œâ”€â”€ Versioned releases (v0.1.0, v0.2.0, etc.)           â”‚
â”‚    â”‚    â”œâ”€â”€ Automatic release notes generation                 â”‚
â”‚    â”‚    â””â”€â–º Direct download for users                          â”‚
â”‚    â”‚                                                          â”‚
â”‚    â”œâ”€â”€ Package Managers (future)                               â”‚
â”‚    â”‚    â”œâ”€â”€ Homebrew (macOS)                                    â”‚
â”‚    â”‚    â”œâ”€â”€ Chocolatey (Windows)                               â”‚
â”‚    â”‚    â””â”€â–º Easy installation for power users                  â”‚
â”‚    â”‚                                                          â”‚
â”‚    â””â”€â”€ Auto-update (via Tauri Updater)                          â”‚
â”‚         â”œâ”€â”€ Check for updates on startup                       â”‚
â”‚         â”œâ”€â”€ Download and install updates                       â”‚
â”‚         â””â”€â–º Seamless user experience                           â”‚
â”‚                                                                  â”‚
â”‚  Release Process                                                â”‚
â”‚    1. Create release branch (release/vX.Y.Z)                    â”‚
â”‚    2. Update version numbers                                    â”‚
â”‚    3. Update CHANGELOG.md                                       â”‚
â”‚    4. Run full test suite                                       â”‚
â”‚    5. Build release binaries                                    â”‚
â”‚    6. Sign binaries (if applicable)                             â”‚
â”‚    7. Create GitHub release with artifacts                      â”‚
â”‚    8. Publish to package managers                              â”‚
â”‚    9. Announce to users                                         â”‚
â”‚                                                                  â”‚
â”‚  Versioning Scheme (Semantic Versioning)                        â”‚
â”‚    â”œâ”€â”€ MAJOR (X.0.0): Breaking changes                          â”‚
â”‚    â”œâ”€â”€ MINOR (0.X.0): New features, backwards compatible       â”‚
â”‚    â””â”€â”€ PATCH (0.0.X): Bug fixes, backwards compatible          â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Environment Configuration

```rust
// Environment Configuration
#[derive(Debug, Clone)]
pub struct Environment {
    pub name: EnvType,
    pub api_base_url: String,
    pub enable_logging: bool,
    pub log_level: String,
}

#[derive(Debug, Clone, PartialEq)]
pub enum EnvType {
    Development,
    Staging,
    Production,
}

impl Environment {
    pub fn from_env() -> Self {
        let name = std::env::var("APP_ENV")
            .unwrap_or_else(|_| "development".to_string())
            .parse()
            .unwrap_or(EnvType::Development);
        
        let api_base_url = match name {
            EnvType::Development => "http://localhost:3000".to_string(),
            EnvType::Staging => "https://staging-api.example.com".to_string(),
            EnvType::Production => "https://api.example.com".to_string(),
        };
        
        Environment {
            name,
            api_base_url,
            enable_logging: std::env::var("ENABLE_LOGGING").unwrap_or_else(|_| "true".to_string()) == "true",
            log_level: std::env::var("LOG_LEVEL").unwrap_or_else(|_| "info".to_string()),
        }
    }
}
```

---

## Definition of Done (DoD) - ARCHITECTURE.md

à¹„à¸Ÿà¸¥à¹Œ ARCHITECTURE.md à¸ˆà¸°à¸–à¸·à¸­à¸§à¹ˆà¸²à¹€à¸ªà¸£à¹‡à¸ˆà¸ªà¸¡à¸šà¸¹à¸£à¸“à¹Œà¹€à¸¡à¸·à¹ˆà¸­:

1. âœ… à¸¡à¸µà¹à¸œà¸™à¸ à¸²à¸žà¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¸£à¸°à¸”à¸±à¸šà¸ªà¸¹à¸‡à¸—à¸µà¹ˆà¸Šà¸±à¸”à¹€à¸ˆà¸™
2. âœ… à¸¡à¸µà¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸¡à¸”à¸¹à¸¥à¸—à¸µà¹ˆà¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¹à¸¥à¸°à¸„à¸£à¸šà¸–à¹‰à¸§à¸™
3. âœ… à¸¡à¸µ data flow à¸—à¸µà¹ˆà¸­à¸˜à¸´à¸šà¸²à¸¢à¸—à¸¸à¸ operation à¸«à¸¥à¸±à¸
4. âœ… à¸¡à¸µ dependency graph à¸—à¸µà¹ˆà¹à¸ªà¸”à¸‡à¸„à¸§à¸²à¸¡à¸ªà¸±à¸¡à¸žà¸±à¸™à¸˜à¹Œ
5. âœ… à¸¡à¸µà¸‚à¹‰à¸­à¸¡à¸¹à¸¥ build/run à¸—à¸µà¹ˆà¸„à¸£à¸šà¸–à¹‰à¸§à¸™
6. âœ… à¸¡à¸µà¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¸„à¸§à¸²à¸¡à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢
7. âœ… à¸¡à¸µà¸à¸¥à¸¢à¸¸à¸—à¸˜à¹Œà¸à¸²à¸£à¸›à¸£à¸±à¸šà¸›à¸£à¸¸à¸‡à¸›à¸£à¸°à¸ªà¸´à¸—à¸˜à¸´à¸ à¸²à¸ž
8. âœ… à¸¡à¸µà¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¸à¸²à¸£à¸—à¸”à¸ªà¸­à¸š
9. âœ… à¸¡à¸µà¹à¸œà¸™à¸à¸²à¸£à¸™à¸³à¹„à¸›à¹ƒà¸Šà¹‰à¸‡à¸²à¸™ (deployment)
10. âœ… à¹€à¸‚à¸µà¸¢à¸™à¹€à¸›à¹‡à¸™à¸ à¸²à¸©à¸²à¹„à¸—à¸¢à¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡à¹à¸¥à¸°à¹€à¸›à¹‡à¸™à¸—à¸²à¸‡à¸à¸²à¸£

---

## Acceptance Criteria

à¹€à¸à¸“à¸‘à¹Œà¸à¸²à¸£à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸„à¸¸à¸“à¸ à¸²à¸ž:

1. **à¸„à¸§à¸²à¸¡à¸„à¸£à¸šà¸–à¹‰à¸§à¸™**: à¸ªà¸–à¸²à¸›à¸±à¸•à¸¢à¸à¸£à¸£à¸¡à¸•à¹‰à¸­à¸‡à¸„à¸£à¸­à¸šà¸„à¸¥à¸¸à¸¡à¸—à¸¸à¸à¹à¸‡à¹ˆà¸¡à¸¸à¸¡à¸‚à¸­à¸‡à¸£à¸°à¸šà¸š
2. **à¸„à¸§à¸²à¸¡à¸Šà¸±à¸”à¹€à¸ˆà¸™**: à¹à¸œà¸™à¸ à¸²à¸žà¹à¸¥à¸°à¸„à¸³à¸­à¸˜à¸´à¸šà¸²à¸¢à¸•à¹‰à¸­à¸‡à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¸‡à¹ˆà¸²à¸¢
3. **à¸„à¸§à¸²à¸¡à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡**: à¸•à¹‰à¸­à¸‡à¸ªà¸­à¸”à¸„à¸¥à¹‰à¸­à¸‡à¸à¸±à¸š spec à¹à¸¥à¸°à¸„à¸§à¸²à¸¡à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸ˆà¸£à¸´à¸‡
4. **à¸„à¸§à¸²à¸¡à¸ªà¸­à¸”à¸„à¸¥à¹‰à¸­à¸‡**: à¸•à¹‰à¸­à¸‡à¸ªà¸­à¸”à¸„à¸¥à¹‰à¸­à¸‡à¸à¸±à¸š README, SPEC, à¹à¸¥à¸° STYLEGUIDE
5. **à¸„à¸§à¸²à¸¡à¸™à¸³à¹„à¸›à¸›à¸à¸´à¸šà¸±à¸•à¸´à¹„à¸”à¹‰**: à¸•à¹‰à¸­à¸‡à¸ªà¸²à¸¡à¸²à¸£à¸–à¸™à¸³à¹„à¸›à¹ƒà¸Šà¹‰à¹ƒà¸™à¸à¸²à¸£à¸žà¸±à¸’à¸™à¸²à¹„à¸”à¹‰à¸ˆà¸£à¸´à¸‡
6. **à¸„à¸§à¸²à¸¡à¸ªà¸¡à¸šà¸¹à¸£à¸“à¹Œà¸‚à¸­à¸‡à¹à¸œà¸™à¸ à¸²à¸ž**: à¸•à¹‰à¸­à¸‡à¸¡à¸µà¹à¸œà¸™à¸ à¸²à¸¡à¸›à¸£à¸°à¸à¸­à¸šà¸—à¸¸à¸à¸«à¸±à¸§à¸‚à¹‰à¸­
7. **à¸„à¸§à¸²à¸¡à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡à¸‚à¸­à¸‡ Dependency**: à¸•à¹‰à¸­à¸‡à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸² dependency à¸—à¸µà¹ˆà¸£à¸°à¸šà¸¸à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡
8. **à¸„à¸§à¸²à¸¡à¹€à¸›à¹‡à¸™à¸¡à¸²à¸•à¸£à¸à¸²à¸™**: à¹ƒà¸Šà¹‰à¸£à¸¹à¸›à¹à¸šà¸šà¹à¸¥à¸°à¸à¸²à¸£à¸ˆà¸±à¸”à¸£à¸¹à¸›à¹à¸šà¸šà¸—à¸µà¹ˆà¸ªà¸­à¸”à¸„à¸¥à¹‰à¸­à¸‡à¸à¸±à¸™
9. **à¸„à¸§à¸²à¸¡à¸™à¹ˆà¸²à¹€à¸Šà¸·à¹ˆà¸­à¸–à¸·à¸­**: à¸à¸²à¸£à¸­à¸­à¸à¹à¸šà¸šà¸•à¹‰à¸­à¸‡à¸ªà¸¡à¹€à¸«à¸•à¸¸à¸ªà¸¡à¸œà¸¥à¹à¸¥à¸°à¹€à¸›à¹‡à¸™à¹„à¸›à¹„à¸”à¹‰
10. **à¸à¸²à¸£à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š**: à¸œà¹ˆà¸²à¸™à¸à¸²à¸£à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¹‚à¸”à¸¢à¸—à¸µà¸¡à¸žà¸±à¸’à¸™à¸²à¸­à¸¢à¹ˆà¸²à¸‡à¸™à¹‰à¸­à¸¢ 2 à¸„à¸™

---

**à¹€à¸§à¸­à¸£à¹Œà¸Šà¸±à¸™**: 0.1.0  
**à¸­à¸±à¸›à¹€à¸”à¸•à¸¥à¹ˆà¸²à¸ªà¸¸à¸”**: 2024  
**à¸ªà¸–à¸²à¸™à¸°**: âœ… à¹€à¸ªà¸£à¹‡à¸ˆà¸ªà¸¡à¸šà¸¹à¸£à¸“à¹Œ  
**à¸œà¸¹à¹‰à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´**: Lead Developer